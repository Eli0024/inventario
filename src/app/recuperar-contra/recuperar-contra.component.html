<div class="flex justify-center items-center min-h-screen bg-gray-100">
  <div class="w-full max-w-md bg-white rounded-2xl shadow-lg p-8">

    <!-- Paso 1: Usuario + Captcha -->
    <div *ngIf="step === 1" class="space-y-5">
      <h2 class="text-2xl font-semibold text-center text-gray-800">Recuperar Contrase침a</h2>

      <div>
        <label class="block text-gray-700 mb-1 font-medium">Nombre de usuario</label>
        <input
          type="text"
          [(ngModel)]="username"
          class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none"
          placeholder="Ingrese su usuario"
        />
      </div>

      <div>
        <label class="block text-gray-700 mb-1 font-medium">Captcha</label>
        <div class="flex items-center gap-3 mb-2">
          <img
            [src]="captchaImage"
            alt="captcha"
            class="h-20 w-44 border rounded-lg shadow-sm object-contain bg-gray-50"
          />
          <button
            (click)="cargarCaptcha()"
            type="button"
            class="px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200 border rounded-md"
          >
            游댃
          </button>
        </div>

        <input
          type="text"
          [(ngModel)]="captchaValue"
          (input)="verificarCaptcha()"
          class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-400 focus:outline-none"
          placeholder="Escriba el texto del captcha"
        />
      </div>

      <button
        (click)="continuar()"
        [disabled]="!isCaptchaCorrect || username.trim() === ''"
        class="w-full bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg font-medium transition disabled:opacity-50"
      >
        Continuar
      </button>
    </div>

    <!-- Paso 2: Nueva contrase침a -->
    <div *ngIf="step === 2" class="space-y-5">
      <h2 class="text-2xl font-semibold text-center text-gray-800">Crear nueva contrase침a</h2>

      <div>
        <label class="block text-gray-700 mb-1 font-medium">Nueva contrase침a</label>
        <input
          type="password"
          [(ngModel)]="newPassword"
          class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-400 focus:outline-none"
          placeholder="Nueva contrase침a"
        />
      </div>

      <div>
        <label class="block text-gray-700 mb-1 font-medium">Confirmar contrase침a</label>
        <input
          type="password"
          [(ngModel)]="confirmPassword"
          class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-400 focus:outline-none"
          placeholder="Confirmar contrase침a"
        />
      </div>

      <button
        (click)="cambiarPassword()"
        [disabled]="!newPassword || newPassword !== confirmPassword"
        class="w-full bg-green-600 hover:bg-green-700 text-white p-3 rounded-lg font-medium transition disabled:opacity-50"
      >
        Confirmar
      </button>

      <p class="text-red-500 text-center mt-2" *ngIf="errorMessage">{{ errorMessage }}</p>
      <p class="text-green-500 text-center mt-2" *ngIf="successMessage">{{ successMessage }}</p>
    </div>

  </div>
</div>
